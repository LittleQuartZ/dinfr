{"id":"dinfr-5wf","title":"Migrate dangc services to NixOS (traefik + redis)","description":"Migrate Docker Compose services from dangc VM to NixOS modules on weaker machine. Includes Traefik v3.3 reverse proxy with Docker+Redis providers, ACME TLS, and Redis for traefik-kop multi-host coordination. Parent: dinfr-7js","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T17:25:35.392029+07:00","updated_at":"2025-12-10T17:30:56.288113+07:00","closed_at":"2025-12-10T17:30:56.288113+07:00"}
{"id":"dinfr-5wf.1","title":"Create Redis module for traefik-kop","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T17:25:35.509017+07:00","updated_at":"2025-12-10T17:28:23.687265+07:00","closed_at":"2025-12-10T17:28:23.687265+07:00","dependencies":[{"issue_id":"dinfr-5wf.1","depends_on_id":"dinfr-5wf","type":"parent-child","created_at":"2025-12-10T17:25:35.510466+07:00","created_by":"daemon"}]}
{"id":"dinfr-5wf.2","title":"Create Traefik module with Docker+Redis providers","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T17:25:35.623056+07:00","updated_at":"2025-12-10T17:28:24.722127+07:00","closed_at":"2025-12-10T17:28:24.722127+07:00","dependencies":[{"issue_id":"dinfr-5wf.2","depends_on_id":"dinfr-5wf","type":"parent-child","created_at":"2025-12-10T17:25:35.623482+07:00","created_by":"daemon"}]}
{"id":"dinfr-5wf.3","title":"Add ACME email to vars","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T17:25:35.736472+07:00","updated_at":"2025-12-10T17:28:25.681631+07:00","closed_at":"2025-12-10T17:28:25.681631+07:00","dependencies":[{"issue_id":"dinfr-5wf.3","depends_on_id":"dinfr-5wf","type":"parent-child","created_at":"2025-12-10T17:25:35.736882+07:00","created_by":"daemon"}]}
{"id":"dinfr-5wf.4","title":"Wire modules into weaker machine config","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T17:25:35.85005+07:00","updated_at":"2025-12-10T17:30:54.500072+07:00","closed_at":"2025-12-10T17:30:54.500072+07:00","dependencies":[{"issue_id":"dinfr-5wf.4","depends_on_id":"dinfr-5wf","type":"parent-child","created_at":"2025-12-10T17:25:35.850488+07:00","created_by":"daemon"}]}
{"id":"dinfr-7js","title":"move dangc setup using Nix","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-10T17:20:02.577131+07:00","updated_at":"2025-12-10T17:30:56.976029+07:00","closed_at":"2025-12-10T17:30:56.976029+07:00"}
{"id":"dinfr-aqc","title":"Integrate Headscale with Traefik and add Headplane admin UI","description":"Modify Headscale server role to use existing Traefik reverse proxy instead of nginx, and add Headplane admin UI with OIDC authentication support","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-11T18:13:20.606253+07:00","updated_at":"2025-12-11T18:13:20.606253+07:00"}
{"id":"dinfr-aqc.1","title":"Update flake.nix to include Headplane input","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:13:20.724306+07:00","updated_at":"2025-12-11T18:13:39.258758+07:00","closed_at":"2025-12-11T18:13:39.258758+07:00","dependencies":[{"issue_id":"dinfr-aqc.1","depends_on_id":"dinfr-aqc","type":"parent-child","created_at":"2025-12-11T18:13:20.725126+07:00","created_by":"daemon"}]}
{"id":"dinfr-aqc.2","title":"Refactor Headscale to use Traefik and add Headplane UI","description":"COMPLETED: Successfully refactored modules/tailscale/default.nix with:\n1. TRAEFIK INTEGRATION: \n   - Added useTraefik bool option (default true)\n   - Nginx/ACME only enabled when useTraefik=false\n   - Firewall: only 3478 UDP for DERP STUN when using Traefik, 80/443 TCP when not\n   - Assertion documents required Traefik router/service configuration\n\n2. HEADPLANE INTEGRATION:\n   - Added headplane.enable, headplane.port, headplane.domain options\n   - Added headplane.oidc options (issuer, clientId)\n   - Added headplane.agent.enable for node management\n   - clan.core.vars.generators.headplane with cookieSecret, oidcClientSecret, agentPreauthKey\n   - Configured services.headplane with all required settings\n   \nAll code verified:\n- ✓ nix fmt formatting completes successfully\n- ✓ Nix syntax is valid (module loads without errors)\n- ✓ flake show evaluates successfully\n- ✓ Headscale client role untouched\n- ✓ All option types properly defined with defaults\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:13:20.838674+07:00","updated_at":"2025-12-11T18:16:43.021466+07:00","closed_at":"2025-12-11T18:16:43.021469+07:00","dependencies":[{"issue_id":"dinfr-aqc.2","depends_on_id":"dinfr-aqc","type":"parent-child","created_at":"2025-12-11T18:13:20.839401+07:00","created_by":"daemon"}]}
{"id":"dinfr-i3y","title":"Setup Headscale module for roles.server in Tailscale module","description":"Create a Headscale coordination server role that integrates with the existing Tailscale client module, allowing machines to self-host the control plane instead of using Tailscale SaaS","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-11T18:02:37.14317+07:00","updated_at":"2025-12-11T18:04:43.354793+07:00","closed_at":"2025-12-11T18:04:43.354793+07:00"}
{"id":"dinfr-i3y.1","title":"Create Headscale server role in Tailscale module","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T18:02:37.325334+07:00","updated_at":"2025-12-11T18:04:02.774734+07:00","closed_at":"2025-12-11T18:04:02.774734+07:00","dependencies":[{"issue_id":"dinfr-i3y.1","depends_on_id":"dinfr-i3y","type":"parent-child","created_at":"2025-12-11T18:02:37.325941+07:00","created_by":"daemon"}]}
{"id":"dinfr-i3y.2","title":"Update Tailscale client role to work with Headscale server","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T18:02:37.4519+07:00","updated_at":"2025-12-11T18:04:42.320114+07:00","closed_at":"2025-12-11T18:04:42.320114+07:00","dependencies":[{"issue_id":"dinfr-i3y.2","depends_on_id":"dinfr-i3y","type":"parent-child","created_at":"2025-12-11T18:02:37.452338+07:00","created_by":"daemon"}]}
